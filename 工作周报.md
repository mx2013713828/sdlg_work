# <div align='center'> 小马过河 </div>

#### <p align = "center">马玉峰📜</p>

## 工作计划表

| N  | 1 |2|3|all|
| :----:| :----:| :----:|:----:|:----:|
| 马玉峰 | 50 | 0 |50|100|
| 王蓉蓉 | 50 | 50 |50|150|
| 杜文汉 | 50 | 50 |40|140|
| 卢元栋 | 0 | 50 |50|100|
| sum | 150 | 150 |190|490|



马玉峰工作周报

一、目标跟踪代码移植与测试。

1. 将基于点云检测的多目标检测代码移植到auto_beishan代码中。

2. 分别测试跟踪前过滤与跟踪后过滤的跑车效果，跟踪后过滤中存在障碍物重叠问题，跟踪前过滤的效果相对较好。

3. 解决跟踪时目标下一步状态预测时的航向角浮动问题，在使用卡尔曼滤波进行预测时添加角度偏移量与约束条件，将预测值限制在-180°~180°之间。

4. 在进行预测目标与检测目标匹配时，修改计算giou的方式，测试使用凸包算法计算最小闭合空间与最大最小坐标方式的差距。使用凸包算法更准确，阈值更大，最大最小坐标计算简单快速，阈值要设的更小。

二、跑车测试

1. 熟悉矿车驾驶操作，手动和无人模式下进行多圈跑车测试，与他人配合进行装料点排土区的测试。

2. 测试皮卡在坡道上的雷达检测效果，发现在坡道上时皮卡在15米外检测不准的问题，后续需从数据集和模型上解决问题。

三、数据录制

1. 录制多段跟踪测试数据。

2. 录制3000张皮卡点云数据后续标注使用。

##


#### 2024年2月27日更新
```mermaid
gantt
    dateFormat YYYY-MM-DD
    title work arrangement
    axisFormat %m/%d
    excludes sunday
    section 浙大项目
        环境配置: crit,done,hjaz,2024-02-18, 7d
        挖机调试:crit,done,wj,after hjaz,7d
        代码调试: crit,done,zd,after hjaz,14d

    section 北山代码相关调试
        推理代码纠错:  done,crit,des1,2024-02-25,12d
        后雷达融合:  done,des2,2024-04-12,8d
        点云跟踪研究: active,pcl2,2024-04-16,10d

    section 点云数据集维护
        点云数据集标注: crit,active,des1,2024-02-21, 56d
        代码完善:  active,des2,2024-02-27,24d
        训练调参:  active,des3,2024-03-05,46d
        测试:      crit,active,after des2,28d

    section 图像数据集维护    
        数据集整理: crit,done,data1,2024-02-20,9d
        训练调参: done,train2,after data1,10d
        测试:done,after train2,5d

    section CUDA加速PCL库维护
        点云合并与转化: done,pcl1,2024-02-25,12d
        点云降采样: active,des4,after pcl1, 12d
        点云裁剪: done,des7,after des4,12d


```


## 2023年12月01日更新 

目前已完成：

        1.多雷达融合算法。通过徐坤提供的标定参数，完成了标定融合，并解决了耗时较长的问题，使用CUDA对融合操作进行加速，将transform操作从40ms降低到2ms，将点云拼接操作从80ms降低到2ms，目前总体融合速度从200+ms提升到了40ms左右。

        2.代码退出问题。目前已解决了多线程显存分配导致冲突、yolov5lite导致的退出、融合部分报错、禾赛sdk导致的退出等问题。
        
        3.点云目标检测问题。目前已实现实时点云目标检测、可视化，检测速度为20~30ms，融合加检测耗时约65ms。

存在问题：

        1.点云检测效果不佳，实测使用单雷达测试可识别出皮卡、行人，少数帧检测到矿车。误检率较高。使用融合后点云，大部分场景下识别不到目标。

后续工作:

        1.今天录制了数据包，后面分解成pcd进行单帧测试。

        2.使用其他数据集的数据包进行测试，分析不同数据集之间的差异。

        3.使用重机录制的数据进行测试，分析环境变换的影响。




## 2023年11月10日更新

- 未来工作计划

| 工作内容  | 开始时间 |预计时长|备注|
| :----:| :----:| :----:|:----:|
| 雷达与摄像头推理冲突问题 | 11.10 | 一周 |后备方案使用CPU|
| 雷达与摄像头实装稳定性测试 | 11.20号装车完成后 | 一周 |与徐坤配合|
| 多雷达标定测试 | 11.20号装车完成后 | 3~5天 |与徐坤配合|
| 点云目标检测精度测试 | 11.20号装车完成后 | 长期 ||
| 图像目标检测精度测试 | 11.20号装车完成后 | 长期优化 ||


-------------

<div align='center'> 2023-8-7 ~~2023-8-11 </div>

| 2023-8-7  | 周一 |周二|周三|周四|周五|
| :----:| :----:| :----:|:----:|:----:|:----:|
| v5训练集标注 | 2000/12370| 4000/12370 |6000/12370|9000/12370|12370/12370|
| YOLOv3-tiny训练 | # | # |# |# |开始训练 |

<div align='center'> 2023-8-14 ~~2023-8-18 </div>

| 2023-8-14  | 周一 |周二|周三|周四|周五|
| :----:| :----:| :----:|:----:|:----:|:----:|
| 准备述职汇报 | 确定汇报内容| 制作PPT、完善 |汇报|#|#|
| 激光雷达选型研究 | # | # |# |联系镭神、禾赛、图达通销售、确定基本价格和参数 |搜集单线激光雷达、制作激光雷达选型文档 |
| YOLOv3-tiny调参测试| #| #| #|使用1024batch、5000iter训练，loss降到1.5附件，收敛情况未知 |使用512batch、 50000iter训练，loss降到1，收敛还是过拟合未知，但实际测试有提升|
；
<div align='center'> 2023-8-21 ~~2023-8-25 </div>

| 2023-8-21  | 周一 |周二|周三|周四|周五|
| :----:| :----:| :----:|:----:|:----:|:----:|
|YOLOv3-tiny调参 |调整lr,burn_in,继续训练 | | | | |
|v5 验证集标注| 300/2000| 500/2000|| #| #|
|yolov8训练测试|#|#|yolov8n训练|yolov8 CPP测试|yolov8cpp opencv测试|


<div align='center'> 2023-8-28 ~~2023-9-2 </div>

| 2023-8-28  | 周一 |周二|周三|周四|周五|
| :----:| :----:| :----:|:----:|:----:|:----:|
|yolov8~|训练完成，CPP-OPENCV版本跑通|工控机版本不支持|||
|yolov5（yolov8 opencv部署需opencv4.7）|#|yolov5n训练+代码调试|调参继续训练，优化效果|#|#|
|点云标注工具调研|#|#|#|https://supervisely.com/labeling-toolbox/3d-lidar-sensor-fusion/|#|

<div align='center'> 2023-9-11 ~~2023-9-15 </div>

| 2023-9-11 / 工作日志 | 周一 |周二|周三|周四|周五|备注|
| :----:| :----:| :----:|:----:|:----:|:----:|:----:|
|ftp服务器搭建|#|完成|  |  |
| mysql服务搭建|#|#| 完成 |  |
| 工控机刷机 | # | # | jetpack包下载，研究刷机过程 |doing|#|详见[开发板刷机记录](./%E8%87%AA%E5%88%B6%E5%BC%80%E5%8F%91%E6%9D%BF%E5%88%B7%E6%9C%BA%E8%AE%B0%E5%BD%95.md) |
| 禾赛雷达sdk编译与运行 | #| 下载编译，GPU版本编译失败 ，CPU版本编译成功| 徐坤已完成 | # | 和徐坤编译运行cuda_point_pillar的demo检测禾赛雷达点云，检测效果较差 |
|tensorrt图像检测部署加速研究 | # | tensorrtx下载编译成功| 学习基本流程，lenet加速成功 | 阅读lenet案例代码 | 继续学习中 |目标是应用yolov8的部署，以及自定义更改网络模型的部署|
| OpenPCDet 与 CUDA_POINTPILLARS安装 | # | # | # | # | 详见[这里](./OpenPCDet%E4%B8%8ECuda_pointpillars%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE.md) |

----

<div align='center'> 2023-9-18 ~~2023-9-22 </div>

| 2023-9-11 / 工作日志 | 周一 |周二|周三|周四|周五|备注|
| :----:| :----:| :----:|:----:|:----:|:----:|:----:|
|挡墙算法研究|#|编写python版点云读取接口，讨论挡墙检测算法| 徐坤测试栅格法，我测试角线法，编写python版算法代码测试 | 继续编写算法并通过参数调试，在室内点云图和kitti数据集上测试 ![this](./images/%E8%A7%92%E7%BA%BF%E6%B3%95p1.png) ![this2](./images/%E8%A7%92%E7%BA%BF%E6%B3%95p2.png)，目前仍旧存在地面分割不干净、鲁棒性差问题 | 调试挡墙检测算法参数、录制数据包|  |
| OpenPCDet和CUDA_POINTPILLARS流程跑通| 重新安装openpcdet\pytorch、跑通cuda_point_pillars模型转化代码|# |跑通openpcdet检测demo |解决spconv和pcdet版本冲突，跑通cuda_point_pillars的pt模型转化onnx |# |


<div align='center'> 2023-9-25 ~~2023-9-29 </div>

| 2023-9-25 / 工作日志 | 周一 |周二|周三|周四|周五|备注|
| :----:| :----:| :----:|:----:|:----:|:----:|:----:|
|点云检测jetpack50版本代码 | | | | | |
|三雷达融合检测 | | | | | |

<div align='center'> 2023-10-4 ~~2023-10-13 </div>

| 2023-10-4 / 工作日志 | 完成情况|备注|
| :----:| :----:| :----|
|yolov8的图像检测，opencv_dnn版本 |done | 还有tensorrt版本待测试|
|cuda_pointpillars推理 |doing | 等待雷达sdk|
|激光雷达测试 |done | |
|多雷达点云融合函数 |done | 位移参数和旋转参数|

---

10-23 --- 10-28 工作总结与未来计划

工作内容:

        1、协助徐坤进行多雷达标定的测试并修改代码。

        2、解决点云推理与图像推理冲突的问题，通过多种实验定位问题源头，目前考虑是显存分配问题。

下周工作计划：

        1、解决冲突问题。（1-3天）

        2、解决冲突问题后修改代码使用单独线程启动。

        3、剩余时间研究目标跟踪。

未来待完善问题：

        1、yolov8的tensorrt模式推理加入。

        2、确定图像推理模型，针对性训练提升效果。

---

<div align='center'> 2023-10-30 ~~2023-11-4 </div>

